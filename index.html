<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<title> visualizing paintings </title>

    <style>
  			html, body {
				height: 100%;
			}

			body {
        background-color: #000;
				margin: 0;
				font-family: Helvetica, sans-serif;;
				overflow: hidden;
			}
			#menu {
				position: absolute;
				bottom: 20px;
				width: 100%;
				text-align: center;
			}


			button {
				color: rgba(127,255,255,0.75);
				background: transparent;
				outline: 1px solid rgba(127,255,255,0.75);
				border: 0px;
				padding: 5px 10px;
				cursor: pointer;
			}
			button:hover {
				background-color: rgba(0,255,255,0.5);
			}
			button:active {
				color: #000000;
				background-color: rgba(0,255,255,0.75);
			}

    </style>
  </head>
  <body>
    <script src="js/three.min.js"></script>
		<script src="js/tween.min.js"></script>
		<script src="js/TrackballControls.js"></script>

    <div id="container"></div>
    <div id="menu">
			<!-- <button id="table">TABLE</button> -->
			<button id="sphere">SPHERE</button>
			<button id="helix">HELIX</button>
			<button id="grid">GRID</button>
		</div>

    
    <script>
      var camera, scene, renderer;
      var painters = ["caravaggio", "hals", "poussin", "velazquez", "rembrandt", "vermeer", "gogh", "kandinsky", "matisse", "picasso", "miro", "pollock"];
      var objects = [];
      var targets = {table: [], sphere: [], grid: [], helix: []};

      init();
      animate();
      
      function animate() {
        requestAnimationFrame(animate);
        TWEEN.update();
        controls.update();
      }

      function init() {
        // renderer
        renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.domElement.style.position = 'absolute';
        document.getElementById( 'container' ).appendChild( renderer.domElement );
        
        // camera
        camera = new THREE.PerspectiveCamera(150, window.innerWidth / window.innerHeight, 10, 5000);
        camera.position.z = 500;
 
        // scene
        scene = new THREE.Scene();
        //scene.fog = new THREE.Fog('#000000', 0, 1050);

        // paintings as textured planes
        for (var i=0; i<painters.length; i++) {
          for (var j=0; j<20; j++) {
            // material
            var material = new THREE.MeshLambertMaterial({
              map: THREE.ImageUtils.loadTexture('thumbs/' + painters[i] + '/' + j + '.png'),
              side: THREE.DoubleSide
            });
            
            // object
            var plane = new THREE.Mesh(
              new THREE.PlaneGeometry(200, 200), material
            );
            plane.position.x = (i*210)-window.innerWidth;
            plane.position.y = (j*210)-990;
            scene.add(plane);
            objects.push(plane);
            targets.table.push( plane );
          }
        }

        // sphere

				var vector = new THREE.Vector3();

				for ( var i = 0, l = objects.length; i < l; i ++ ) {

					var phi = Math.acos( -1 + ( 2 * i ) / l );
					var theta = Math.sqrt( l * Math.PI ) * phi;

					var object = new THREE.Object3D();

					object.position.x = 800 * Math.cos( theta ) * Math.sin( phi );
					object.position.y = 800 * Math.sin( theta ) * Math.sin( phi );
					object.position.z = 800 * Math.cos( phi );

					vector.copy( object.position ).multiplyScalar( 4 );

					object.lookAt( vector );

					targets.sphere.push( object );

				}
				// helix

				var vector = new THREE.Vector3();

				for ( var i = 0, l = objects.length; i < l; i ++ ) {

					var phi = i * 0.175 + Math.PI;

					var object = new THREE.Object3D();

					object.position.x = 900 * Math.sin( phi );
					object.position.y = - ( i * 8 ) + 450;
					object.position.z = 900 * Math.cos( phi );

					vector.x = object.position.x * 2;
					vector.y = object.position.y;
					vector.z = object.position.z * 2;

					object.lookAt( vector );

					targets.helix.push( object );

				}

				// grid

				for ( var i = 0; i < objects.length; i ++ ) {

					var object = new THREE.Object3D();

					object.position.x = ( ( i % 5 ) * 400 ) - 800;
					object.position.y = ( - ( Math.floor( i / 5 ) % 5 ) * 400 ) + 800;
					object.position.z = ( Math.floor( i / 25 ) ) * 1000 - 2000;

					targets.grid.push( object );

				}
        
        // add subtle ambient lighting
        var ambientLight = new THREE.AmbientLight(0xffffff);
        scene.add(ambientLight);

        controls = new THREE.TrackballControls( camera, renderer.domElement );
				controls.rotateSpeed = 0.5;
				controls.minDistance = 10;
				controls.maxDistance = 2000;
				controls.addEventListener( 'change', render );

        window.addEventListener( 'resize', onWindowResize, false );


				// var button = document.getElementById( 'table' );
				// button.addEventListener( 'click', function ( event ) {

				// 	transform( targets.table, 2000 );

				// }, false );

				var button = document.getElementById( 'sphere' );
				button.addEventListener( 'click', function ( event ) {

					transform( targets.sphere, 2000 );

				}, false );

				var button = document.getElementById( 'helix' );
				button.addEventListener( 'click', function ( event ) {

					transform( targets.helix, 2000 );

				}, false );

				var button = document.getElementById( 'grid' );
				button.addEventListener( 'click', function ( event ) {

					transform( targets.grid, 2000 );

				}, false );

        
        transform(targets.table, 2000);
      }

      function render() {
        renderer.render(scene, camera);
      }

      function onWindowResize() {
        
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
        
				renderer.setSize( window.innerWidth, window.innerHeight );
        
				render();
			}

			function transform( targets, duration ) {

				TWEEN.removeAll();

				for ( var i = 0; i < objects.length; i ++ ) {

					var object = objects[ i ];
					var target = targets[ i ];

					new TWEEN.Tween( object.position )
						.to( { x: target.position.x, y: target.position.y, z: target.position.z }, Math.random() * duration + duration )
						.easing( TWEEN.Easing.Exponential.InOut )
						.start();

					new TWEEN.Tween( object.rotation )
						.to( { x: target.rotation.x, y: target.rotation.y, z: target.rotation.z }, Math.random() * duration + duration )
						.easing( TWEEN.Easing.Exponential.InOut )
						.start();

				}

				new TWEEN.Tween( this )
					.to( {}, duration * 2 )
					.onUpdate( render )
					.start();

			}

      
    </script>
    
  </body>
</html>
